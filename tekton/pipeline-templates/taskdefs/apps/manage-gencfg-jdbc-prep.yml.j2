- name: gencfg-jdbc
  params:
    {{ lookup('template', 'taskdefs/common/cli-params.yml.j2') | indent(4) }}
    - name: devops_suite_name
      value: gencfg-jdbc

    - name: configure_external_database
      value: "$(params.configure_external_database)"
    - name: db_instance_id
      value: "$(params.db_instance_id)"
    - name: mas_jdbc_user
      value: "$(params.mas_jdbc_user)"
    - name: mas_jdbc_password
      value: "$(params.mas_jdbc_password)"
    - name: mas_jdbc_url
      value: "$(params.mas_jdbc_url)"
    - name: mas_app_settings_db2_schema
      value: "$(params.mas_app_settings_db2_schema)"
    - name: mas_app_settings_tablespace
      value: "$(params.mas_app_settings_tablespace)"
    - name: mas_app_settings_indexspace
      value: "$(params.mas_app_settings_indexspace)"
    - name: ssl_enabled
      value: "$(params.ssl_enabled)"
    - name: mas_jdbc_cert_local_file
      value: "$(params.mas_jdbc_cert_local_file)"

  # Only perform the hack if Manage is being installed
  when:
    - input: "$(params.mas_app_channel_manage)"
      operator: notin
      values: [""]
    - input: "$(params.configure_external_db)"
      operator: notin
      values: ["false"]  
  taskRef:
    name: mas-devops-gencfg-jdbc
    kind: Task